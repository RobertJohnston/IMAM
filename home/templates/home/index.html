{% extends "home/header.html" %}
{% load staticfiles %}

{% block content %}

    <div>
        <select id="filter-by-state-value">
            {% for siteid in state_list %}
            <option value="{{ siteid.state_num }}">{{ siteid.state }}</option>
            {% endfor %}
        </select>
        <button type="button" id="filter-by-state">Filter by state</button>
    </div>

    <div id="my-chart">
        <p> Chart </p>
        <script>
            $.getJSON("/adm/").success(function(data) {
                amarChart = new Highcharts.Chart(data);
            });

            $("#filter-by-state").click(function(event) {
                var stateNumber = $("#filter-by-state-value").val();

                $.getJSON("/adm/?state_number=" + stateNumber).success(function(data) {
                    amarChart.update(data);
                });
            });
        </script>
    </div>

    <div id='stock-chart'>
        <script>
            Highcharts.chart('container', {
                chart: {
                    zoomType: 'xy'
                },
                credits: {
                    enabled: false
                },
                title: {
                    text: 'Admissions and Performance Indicators'
                },
                subtitle: {
                    text: 'IMAM data: DATE',
                    text: 'IMAM data: DATE',
                    align: 'right',
                    x: -50,
                    y: 340
                },
                xAxis: [{
                    categories: [1,2,3,4,5,6,7,8,9,10,11,12],
                    crosshair: true
                }],
                yAxis: [{ // Primary yAxis
                    labels: {
                        format: '{value}',
                        style: {
                            color: Highcharts.getOptions().colors[1]
                        }
                    },
                    title: {
                        text: 'Admissions',
                        style: {
                            color: Highcharts.getOptions().colors[1]
                        }
                    }
                }, { // Secondary yAxis
                    min: 0,
                    max: 100,
                    title: {
                        text: 'Percentage',
                        style: {
                            color: Highcharts.getOptions().colors[1]
                        }
                    },
                    labels: {
                        format: '{value}',
                        style: {
                            color: Highcharts.getOptions().colors[1]
                        },

                    },
                    opposite: true
                }],
                tooltip: {
                    shared: true
                },
                legend: {
                    layout: 'vertical',
                    align: 'left',
                    x: 100,
                    verticalAlign: 'top',
                    y: 20,
                    floating: true,
                    backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'
                },
                series: [{
                    name: 'Admissions',
                    type: 'column',
                    <!-- DO NOT DECLARE Y AXIS to put on left y axis,-->
                    data: [49, 71, 106, 129, 144, 176, 135, 148, 216, 194, 95, 54],
                    tooltip: {
                        valueSuffix: ' cases'
                    }

                }, {
                    name: 'Default Rate',
                    type: 'spline',
                    yAxis: 1,
                    data: [7.0, 6.9, 9.5, 14.5, 28.2, 11.5, 25.2, 6.5, 13.3, 10.3, 9.9, 9.6],
                    color: '#000000',
                    marker: { enabled: false},
                    tooltip: {
                        valueSuffix: '%'
                    }

                }, {
                    name: 'Transfer Rate',
                    type: 'spline',
                    yAxis: 1,
                    data: [21.0, 21.9, 21.5, 21.5, 22, 22.5, 22.2, 22.5, 23.3, 21.3, 21.9, 20.6],
                    dashStyle: 'shortdot',
                    color: '#FFA500',
                    marker: { enabled: false},
                    tooltip: {
                        valueSuffix: '%'
                    }

                }, {
                    name: 'Non-recovered Rate',
                    type: 'spline',
                    yAxis: 1,
                    data: [6.0, 4.9, 11.5, 7.5, 4, 2.5, 2.2, 12.5, 3.3, 6.3, 8.9, 7.6],
                    dashStyle: 'dash',
                    color: '#9370DB',
                    marker: { enabled: false},
                    tooltip: {
                        valueSuffix: '%'
                    }

                }, {
                    name: 'Death Rate',
                    type: 'spline',
                    yAxis: 1,
                    data: [1.0, 1.9, 1.5, 1.5, 2, 2.5, 2.2, 2.5, 3.3, 1.3, 1.9, 0.6],
                    color: '#FF0000',
                    tooltip: {
                        valueSuffix: '%'
                    }
                }]
            });

        </script>
    </div>

{% include "home/includes/htmlsnippet.html" %}

<!--htmlsnippet could include an error message that is repeated on many different pages. -->

{% endblock %}

<!--see calazan.com - using highcharts with fjango 1.6 and bootstrap-->


